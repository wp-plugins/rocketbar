(function(b){var l,r,q;b(document).ready(function(){var b=document.rocketBar.cache;q=document.rocketBar.baseURL;var d=[],f=document.rocketBar.commands,c;for(c in f)if(f.hasOwnProperty(c)){var k=f[c];k.searchableIndex=d.length;k.iconHTML='<img class="wp-menu-image svg" src="'+document.rocketBar.icon+'" style="fill: white; width: 20px; height: 20px;"></div>';k.link=k.url}for(var g in b.pages)b.pages.hasOwnProperty(g)&&(c=b.pages[g],c.searchableIndex=d.length,c.iconHTML='<div class="wp-menu-image dashicons-before dashicons-admin-page"><br></div>',
d.push(c.title));for(g in b.taxonomies)b.taxonomies.hasOwnProperty(g)&&(c=b.taxonomies[g],c.searchableIndex=d.length,c.iconHTML='<div class="wp-menu-image dashicons-before dashicons-admin-post"><br></div>',d.push(c.title));c={};var k={},h;for(h in b.menu)if(b.menu.hasOwnProperty(h)){var a=b.menu[h];a.searchableIndex=d.length;a[6]&&!a[6].match(/^data:image|^http/i)?a.iconHTML='<div class="wp-menu-image dashicons-before '+a[6]+'"></div>':a[6]&&a[6].match(/data:image\/svg/i)?a.iconHTML='<div class="wp-menu-image svg" style="background-image: url(\''+
a[6]+"') !important; width: 20px; height: 20px; background-size: contain; background-repeat: no-repeat;\"></div>":a[6]&&a[6].match(/http/i)?a.iconHTML='<img src="'+a[6]+'" style="width: 18px; height: 18px; vertical-align: top;" />':a.iconHTML="";var e=a[2];e.match(/\.php/)?a.link=b.admin_url+e:a.link=b.admin_url+"admin.php?page="+e;a[0].length&&(e=a[0].replace(/<(?:.|\n)*?>/gm,"").replace(/\ \d$/,""),c[a[2]]=e,k[a[2]]=a.iconHTML)}for(var p in b.submenu)if(b.submenu.hasOwnProperty(p))for(g in h=b.submenu[p],
a=c[p],h)if(h.hasOwnProperty(g)){var n=h[g],e=n[2];e.match(/\.php/)?n.link=b.admin_url+e:n.link=b.admin_url+"admin.php?page="+e;e=n[0].replace(/<(?:.|\n)*?>/gm,"").replace(/\ \d$/,"");e.length&&(n.searchableIndex=d.length,n.iconHTML=k[p],d.push(a+" \u2192 "+e))}var s=function(a,b){if("number"===!typeof a||"object"!==typeof b)return!1;if(b.hasOwnProperty("searchableIndex")&&b.searchableIndex===a)return b;for(var c in b)if(b.hasOwnProperty(c)&&"object"===typeof b[c]){var e=s(a,b[c]);if(!1!==e)return e}return!1};
l=function(a){var c=d.fuzzyMatches(a);c.forEach(function(a,e){var f=d.indexOf(a.text);c[e]=s(f,b);c[e].txt="";c[e].priority=a.priority;a.text.split("").forEach(function(b,f){-1!==a.matches.indexOf(f)?c[e].txt+="<strong>"+b+"</strong>":c[e].txt+=b})});return c};r=function(a){if(a.trim().length){var b=a.trim().split(" ")[0].toLowerCase();a=a.replace(b,"").trim();var c=!1,e;for(e in f)if(f.hasOwnProperty(e)){var d=f[e];c||0!==e.indexOf(b)||(d.dynamicLink=a.length&&d.param?d.url+d.start+d.param+"="+encodeURIComponent(a):
d.url,c=d)}return c}}});b(document).ready(function(){var m=document.createElement("div");b(m).addClass("rocketbar-wrapper");b(m).append('<input type="text" id="rocketbar" placeholder="Type to navigate..." autofocus="yes" value="" /><ul id="rocketbar-list"></ul>');b("body").append(m);var d=b("#rocketbar"),f=b("#rocketbar-list"),c=0;b(document).on("keyup",function(a){if(!h())return c=0;a.preventDefault();38===a.keyCode?c--:40===a.keyCode&&c++;0>c&&(c=0);g()});d.on("keyup",function(a){13===a.keyCode&&
(a.preventDefault(),b("#rocketbar-list > li > a").each(function(a,d){if(a===c){b(d).click();var f=b(d).attr("target"),f=f?f.toString():!1;"_blank"===f?window.open(b(d).attr("href"),"_blank").focus():document.location=b(d).attr("href")}}))});d.on("change keyup keydown paste",function(){f.html("");" "===b(this).val()&&b(this).val("");if(""===b(this).val())return k();0===b(this).val().indexOf("/")&&f.append('<li><img class="wp-menu-image svg" src="'+document.rocketBar.icon+'" style="fill: white; width: 20px; height: 20px;" /><a href="'+
q+b(this).val()+'"/>Navigate to: '+q+b(this).val().trim()+"</a></li>");var a=r(b(this).val());a&&f.append("<li>"+a.iconHTML+'<a href="'+a.dynamicLink+'">'+a.description+"</a></li>");a=l(b(this).val());a=a.slice(0,10);a.forEach(function(a){f.append("<li>"+a.iconHTML+'<a href="'+a.link+'">'+a.txt+"</a></li>")});a="http://google.com/search?q="+encodeURIComponent(b(this).val());f.append('<li><a href="'+a+'" target="_blank"><strong>Search Google for: <code>'+b(this).val()+"</code></strong></a></li>");
g()});var k=function(){f.html("");var a=l("Dashboard Home")[0];f.append("<li>"+a.iconHTML+'<a href="'+a.link+'">'+a.txt+"</a></li>");a=l("Pages All Pages")[0];f.append("<li>"+a.iconHTML+'<a href="'+a.link+'">'+a.txt+"</a></li>");a=l("Users All users")[0];f.append("<li>"+a.iconHTML+'<a href="'+a.link+'">'+a.txt+"</a></li>");a=l("Settings General")[0];f.append("<li>"+a.iconHTML+'<a href="'+a.link+'">'+a.txt+"</a></li>");a=l("Tools RocketBar")[0];f.append("<li>"+('<img class="wp-menu-image svg" src="'+
document.rocketBar.icon+'"  style="fill: white; width: 20px; height: 20px;" />')+'<a href="'+a.link+'"><strong>Help \u2014 Commands / Key Binds</strong></a></li>')};b(document).on("keydown",function(a){a.shiftKey&&32===a.keyCode&&b(m).toggle();27===a.keyCode&&h()&&b(m).hide();h()||d.val("");" "===d.val()&&d.val("");d.focus()});var g=function(){var a=0;f.find("li").each(function(e,d){e===c?b(d).addClass("selected"):b(d).removeClass("selected");e>a&&(a=e)});c>a&&(c=a,g())},h=function(){return b(m).is(":visible")}})})(jQuery);
